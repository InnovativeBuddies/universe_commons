# Изменение уровня логирования с помощью JMX

## Введение

> JMX (Java Management Extensions) предоставляет API для управления и мониторинга ресурсов Java.
> Logback поддерживает JMX для динамического изменения уровня логирования в работающем приложении.
> Это полезно для изменения уровня логирования без перезапуска приложения, что может быть необходимо для отладки или управления в производственной среде.

## Как это работает

> Включение JMX в Logback позволяет вам управлять конфигурацией логгера через JMX-клиенты, такие, как JConsole или VisualVM.
> С помощью JMX можно динамически изменять уровень логирования для любого логгера в вашей системе.

### Шаги для изменения уровня логирования с помощью JMX

1. Настройте Logback для поддержки JMX:

    * Добавьте элемент <jmxConfigurator /> в вашу конфигурацию Logback.
    * Убедитесь, что у вас настроен консольный или файловый Appender, чтобы видеть изменения уровня логирования.
2. Запустите ваше приложение:
    * Запустите ваше приложение с настройкой Logback, включающей поддержку JMX.
3. Подключитесь к вашему приложению с помощью JConsole:

    * Откройте JConsole (или другой JMX-клиент).
    * Подключитесь к вашему работающему приложению.

4. Найдите MBean ch.qos.logback.classic.jmx.JMXConfigurator:

    * В JConsole перейдите к вкладке MBeans.
    * Найдите MBean с именем ch.qos.logback.classic.jmx.JMXConfigurator.

5. Измените уровень логирования:

    * В MBean JMXConfigurator найдите метод setLoggerLevel.
    * Вызовите метод setLoggerLevel с двумя параметрами:
        * loggerName: Имя вашего логгера (например, com.example).
        * level: Новый уровень логирования (например, DEBUG).

#### Пример XML-конфигурации Logback для поддержки JMX

```xml

<configuration>

    <!-- Консольный Appender -->
    <appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
        <encoder>
            <pattern>%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n</pattern>
        </encoder>
    </appender>

    <!-- Настройка корневого логгера -->
    <root level="INFO">
        <appender-ref ref="STDOUT"/>
    </root>

    <!-- JMX Configurator -->
    <jmxConfigurator/>
</configuration>

```

### Заключение

> Использование JMX для изменения уровня логирования позволяет вам гибко управлять поведением вашего приложения в режиме реального времени. Это особенно полезно в производственных
> средах, где вы не можете позволить себе перезапуск приложения для изменения уровня логирования. Следуя приведенным шагам и используя пример конфигурации, вы можете легко настроить
> и использовать эту мощную функцию Logback.
