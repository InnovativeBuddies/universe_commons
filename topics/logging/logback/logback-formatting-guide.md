# Механизмы форматирования логов в Logback

## Введение

Logback предоставляет мощные возможности для форматирования логов, что позволяет делать логи более читаемыми и информативными. Механизмы форматирования включают в себя
использование различных спецификаторов, которые помогают настроить вывод логов в нужном формате.

## Основные механизмы форматирования

### Дата и время

- `%d{pattern}`: Дата и время события.
  - Пример: `%d{yyyy-MM-dd HH:mm:ss}`
  - Вывод: `2023-05-16 12:34:56`

### Уровень логирования

- `%level` или `%p`: Уровень логирования (например, INFO, DEBUG, ERROR).
  - Пример: `%level`
  - Вывод: `INFO`

### Имя логгера

- `%logger`: Имя логгера.
  - Пример: `%logger`
  - Вывод: `com.example.MyClass`
- `%logger{length}`: Сокращенное имя логгера до указанного количества символов.
  - Пример: `%logger{10}`
  - Вывод: `MyClass`

### Имя потока

- `%thread`: Имя потока, в котором произошло событие.
  - Пример: `%thread`
  - Вывод: `[main]`

### Сообщение лога

- `%msg`, `%m`или `%message`: Сообщение лога.
  - Пример: `%msg`
  - Вывод: `This is a log message`

### Перевод строки

- `%n`: Перевод строки (новая строка).
  - Пример: `%n`
  - Вывод: `\n` (новая строка)

### Время с момента запуска JVM

- `%r` или `%relative`: Время в миллисекундах с момента запуска JVM.
  - Пример: `%relative`
  - Вывод: `12345`

### Имя файла и номер строки

- `%file`: Имя файла, из которого было выполнено логирование.
  - Пример: `%file`
  - Вывод: `MyClass.java`
- `%line`: Номер строки в файле, откуда было выполнено логирование.
  - Пример: `%line`
  - Вывод: `42`

### Имя метода и класса

- `%method` или `%M`: Имя метода, из которого было выполнено логирование.
  - Пример: `%method`
  - Вывод: `myMethod`
- `%class` или `%C`: Полное имя класса, из которого было выполнено логирование.
  - Пример: `%class`
  - Вывод: `com.example.MyClass`

### Контекст MDC

- `%X{key}`: Значение ключа из MDC.
  - Пример: `%X{userId}`
  - Вывод: `user123`

- `%mdc{key}`: Альтернативный синтаксис для получения значения из MDC.
  - Пример: `%mdc{sessionId}`
  - Вывод: `abcdef`

### Исключения

- `%ex` или `%exception`: Стек-трейс исключения (если оно есть).
  - Пример: `%ex`
  - Вывод: `java.lang.Exception: Something went wrong`

### Цветовое выделение

- `%highlight`: Автоматически применяет цветовое выделение к заданной части шаблона в зависимости от уровня логирования.
  - Пример: `%highlight(%level)`
  - Вывод: `INFO` (цветной)
- `%style`: Позволяет более гибко настраивать цвета для различных частей шаблона.
  - Пример: `%style(%level){-color}`
  - Вывод: `INFO` (цветной)

### Заменитель

- `%replace`: Заменяет подстроку в сообщении лога.
  - Пример: `%replace(%msg){'ERROR','WARNING'}`
  - Вывод: `This is a WARNING message`

### Свойства

- `%property{key}`: Значение свойства из системных свойств.
  - Пример: `%property{user.home}`
  - Вывод: `/home/user`

### Хэш-код

- `%hash`: Хэш-код объекта.
  - Пример: `%hash`
  - Вывод: `12345678`

### Идентификатор события

- `%i`: Идентификатор события.
  - Пример: `%i`
  - Вывод: `42`

## Примеры использования

### Пример полного форматирования

Этот пример демонстрирует использование различных спецификаторов для создания полного и информативного шаблона форматирования логов.

## Примеры использования

### Пример 1: Полное форматирование

```xml

<pattern>%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} %file:%line - %msg%n</pattern>
```

###### Вывод:

```log
2023-05-16 12:34:56.789 [main] INFO  com.example.MyClass MyClass.java:42 - This is a log message
```

### Пример 2: Сокращенное имя логгера и метод

```xml

<pattern>%d{HH:mm:ss.SSS} [%thread] %-5level %logger{10}.%M - %msg%n</pattern>
```

###### Вывод:

```log
12:34:56.789 [main] INFO  MyClass.myMethod - This is a log message
```

### Пример 3: Время выполнения и имя потока

```xml

<pattern>%4relative [%thread] %-5level %logger{36} - %msg%n</pattern>
```

###### Вывод:

```log
5 [main] INFO  com.example.MyClass - This is a log message
```

### Заключение

> Использование спецификаторов формата в Logback позволяет гибко настраивать форматирование логов, делая их максимально информативными и удобными для анализа.
> Вы можете комбинировать их в различных конфигурациях, чтобы достичь желаемого формата вывода.
